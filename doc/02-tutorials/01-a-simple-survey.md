# 01 - A Simple Survey

## Introduction

In this short tutorial, we will create a simple survey.

## Create the Survey

To create a survey, we can create a file called `survey.json` that will contain
our survey questions.


```json
{
  "instructions": "Fill out this survey and click the \"Complete\" button to download results.",
  "linear": {
    "description": "Answer me these questions three, ere the other side you see.",
    "q": [{
      "id": "q1", 
      "text": "What is your name?", 
      "type": "longResponse"
    }, {
      "id": "q2", 
      "text": "What is your quest?", 
      "type": "longResponse"
    }, {
      "id": "q3", 
      "text": "What is the airspeed velocity of an unladen swallow?", 
      "type": "longResponse"
    }]
  }
}
```

That's it! From here, we can modify the survey to add, remove, or modify questions.
Every question must have an `id` string to uniquely identify the question, a 
`text` field which is the question text, and a `type` which defined the user
input type.


## Distribute the Survey

To distribute the survey, we need to create a survey link using `spectra mklink`.

To do this, we simply run:

```
spectra mklink -s survey.json
```

This will output something like:

```
Generating link ...

https://surveyor-next.apps.triple.engineering/survey.html?data=SOME_BASE64_ENCODED_DATA

Max URL length is 512
```

The generated link contains everything you need. Just share the link to distribute
the survey.

## Collect and Ingest Results

### Collection 

Surveyor-Next contains no backend. It is a client-side web app for displaying
and completing surveys, not for collecting them. To collect surveys, respondants
must return the `.tdform` file generated by Surveyor-Next.

In an academic context, we recommend collecting this as an assignment. In a corporate
context, this can be collected via email, shared drives, or a custom corporate backend.


### Ingestion

Coming soon.

<!--
- Tell users to download result
- Collect via Canvas or other means
- Add to `.spectra-data/<section>/surveys/raw/YYYY-MM-DD-<survey-id>/<name>_<id>_*.tdform`

### Ingestion and Storage Transformation
- Run `spectra ingest survey --section <section> --survey YYYY-MM-DD-<survey-id>`
- This will process all survey responses and transform them into a more usable format for storage
- This will create `.spectra-data/<section>/surveys/processed/YYYY-MM-DD-<survey-id>.json`
  with all question responses as individual records in an array.

At this point the data is ingested into JSON files containing arrays of individual
question responses in a format that we may query them later.
These files can be stored on disk or in shared cloud storage such as OneDrive or S3.

While some analysis may be feasible on this data, indexing is recommended for
most use cases.

-->

## Store and Serve Data

### Indexing

Coming soon.

<!--
Now we can index the ingested data. To do this, run

- `spectra index survey --section <section> --survey YYYY-MM-DD-<survey-id>.json`
- OR 

```bash
spectra index survey 
    --section <section> 
    --survey "*.json"  
    --backend=elastic
    --host <host> --port <port>
    --username <username> --password <password>
    --index <index-name>
```

Using `*` must be quoted.
-->

## Analyze Results

Coming soon.